Tradução EN PT https://iohk.io/blog/stake-pools-in-cardano/ 2019 01 17
 
O diretor científico de IOHK introduz a participação de interesses
 
Num protocolo blockchain prova de participação, o razão é mantido pelas partes interessadas que detêm os ativos daquele razão. Isto permite aos blockchain de prova de participação a menor utilização de energia quando comparado com o protocolo de prova de trabalho ou outros tipos de protocolos de blockchain. Apesar disso, este requisito impõe um fardo sobre as partes interessadas. Requer um bom número de partes interessadas a estarem online e manterem suficientemente boa conectividade à rede para que possam recolher as transações e terem os seus blocos alcançar outros sem atrasos substanciais da rede. Segue que qualquer razão à prova de participação pode beneficiar de nós de servidores confiáveis que detêm participação e focam-se na manutenção.
 
O argumento para agrupamentos de participação.
Riqueza é tipicamente distribuído de acordo com uma lei de potência tal como a distribuição de Pareto, por isso correr nós confiáveis a executar o protocolo PoS pode estar restrito a um número pequeno subconjunto de partes interessadas ricas deixando a maioria sem qualquer possibilidade de correr tais serviços. Isto não é o desejado; seria melhor se toda a gente tivesse a possibilidade de contribuir para a manutenção do razão. Uma abordagem para retificar este problema consiste em permitir a criação de agrupamentos de participação. Em específico, refere-se à possibilidade de partes interessadas de combinar a sua participação e formar uma entidade única, um agrupamento de participação, que se empenha no protocolo PoS utilizando a totalidade da participação dos seus membros. O agrupamento terá um gestor que é responsável pela execução do serviço de processamento de transações. Ao mesmo tempo, o gestor do agrupamento não deve ser capaz de gastar a participação que o agrupamento representa, enquanto os membros que são representados pelo agrupamento devem ser livres de mudar de ideias e realocar a sua participação a outro agrupamento se assim o entenderem. Por fim, e o mais importante, qualquer parte interessada deve poder aspirar a tornar-se um gestor de um agrupamento.
 
Participar na manutenção de um razão PoS incorre em custos. Certamente não tão elevado como no caso do protocolo de prova de trabalho PoW, no entanto ainda significativo. Em consequência, é sensato que a comunidade de todas as partes interessadas incentivarem de alguma forma aqueles que suportam o razão pela instalação de servidores e processarem transações. Isto pode ser atingido pela combinação de contribuições daqueles que utilizam o razão (sob a forma de custos de transação) e pelo inflacionamento da oferta de moedas em circulação (pela introdução de novas moedas em circulação que podem ser reclamados por aqueles que se empenham no protocolo).
 
No caso de Bitcoin, temos ambos os mecanismos, incentivos e agrupamentos. Por um lado, minerar é recompensado pelos custos de transações além de receber recompensa da criação do bloco que é determinado e diminui ao longo do tempo seguindo uma série geométrica. Por outro lado, agrupamentos podem ser facilitados pela divisão de trabalho requerido para produzir blocos por entre vários participantes utilizando provas de trabalho parciais (que são PoW que são de dificuldade mais baixa do que aquele indicado pelo estado do razão) como evidência de participação no agrupamento.
 
É imediato aplicar um mecanismo de incentivo numa configuração em PoS. Contudo, deve-se perguntar primeiro se o mecanismo do tipo Bitcoin (ou qualquer outro mecanismo) converge a uma configuração do sistema que seja o desejável. Que nos traz à questão importante: quais são os estados de configuração do sistema desejável? Se a única consideração é a minimização dos custos de processamento de transações, num ambiente sem falhas, a configuração económica ótima é uma configuração ditatorial. Uma das partes mantém o razão como um serviço enquanto todos os outros participam no agrupamento criado por esta parte. Isto é claramente um resultado indesejado porque um único líder do agrupamento torna-se o ponto único de falha do sistema o que é exatamente o que um razão distribuído é suposto evitar. Segue que a coexistência de muitos agrupamentos, por outras palavras descentralizados, deve ser uma característica desejada do mecanismo de incentivo do razão.
 
Esquema de partilha recompensas para PoS
 
Então como é que um esquema de partilha recompensas numa configuração de PoS? Recompensas devem ser fornecidas em intervalos regulares e os custos de manutenção dos agrupamentos devem ser retidos pelo gestor do agrupamento antes da distribuição das restantes recompensas aos membros do agrupamento. Dado que é possível monitorizar fidelização a um agrupamento no próprio razão utilizando as chaves de participação dos participantes, a divisão das recompensas em cada agrupamento pode ser codificada num contrato inteligente e tornar-se parte do serviço de manutenção do razão. Primeiro que tudo, os gestores de agrupamentos devem ser recompensados pelo seu empreendedorismo. A criação de um agrupamento certificado e emitido no razão irá declarar a margem de lucro que será retirado das recompensas do agrupamento após a subtração dos custos operacionais, que também devem estar declaradas no certificado de criação do agrupamento. O custo da declaração deve ser atualizado de forma regular à moeda que denomina os custos reais do gestor do agrupamento. Em qualquer momento, o certificado de criação do agrupamento, suportado por uma ou mais chaves de participação fornecidos pelas partes interessadas, podem declarar uma determinada quantia de participação que "suporta" o agrupamento e pode ser utilizado quer como uma indicação de que o agrupamento representa uma empresa genuína de uma ou mais partes interessadas ou como garantia demonstrando conformidade com um correto comportamento perante o protocolo.
 
Dada a configuração acima, como é que mecanismos do tipo Bitcoin se comparam em relação a este objetivo de descentralização? Em Bitcoin, assumindo que toda a gente segue o protocolo, as recompensas de agrupamento são divididas em proporção ao tamanho de cada agrupamento. Por exemplo, um agrupamento de mineiros com 20% de potência de hashing espera um retorno de 20% das recompensas. Isto acontece porque recompensas são proporcionais ao número de blocos obtidos pelo agrupamento e o número de blocos por seu turno é proporcional à potência do agrupamento. Será que isto leva a um sistema descentralizado? Evidências empíricas sugerem o contrário: em Bitcoin, agrupamentos aproximaram-se (e ocasionalmente até excederam) o limiar dos 50% que é o limite superior para assegurar a resiliência do razão. Um argumento simples pode validar esta observação empírica no enquadramento do nosso esquema de partilha de recompensas: se agrupamentos são recompensados proporcionalmente ao seu tamanho e os membros do agrupamento recompensados proporcionalmente à sua participação no agrupamento, o raciocínio lógico seria de concentrar num único agrupamento. Para melhor evidenciar isto consideremos o seguinte. Em primeira instância é razoável esperar que todos os participantes que são suficientemente ricos para poderem criar um agrupamento fá-lo-ão implementando servidores alugados ou promovendo com o intuito de atrair membros de modo que a sua recompensa aumente. As outras partes interessadas que não são gestores de agrupamento juntar-se-ão ao agrupamento que lhes maximize as recompensas, que será aquele que tem os custos mais baixos e maior margem de lucro. A competição de agrupamentos para angariar membros irá comprimir margens de lucro para valores muito baixos. Mesmo assim para margens de lucro de zero, todos os outros agrupamentos irão perder para o agrupamento com custo mais baixo. Assumindo que não ocorrem empates, este único agrupamento irá atrair todas as partes interessadas. Finalmente, outros gestores de agrupamentos irão perceber que estarão melhor juntando-se a esse agrupamento ao contrário de se manter em funcionamento porque receberão uma maior recompensa para a participação que detêm. Ao longo do tempo o sistema converge para um único agrupamento ditatorial.
 
A figura 1 mostra uma representação gráfico disto mesmo. A figura advém de uma das numerosas simulações que a nossa equipa conduziu no processo de destilar o esquema de partilha de recompensas, mas eficiente. No ensaio, uns números de partes interessadas seguem um processo reativo onde procuram maximizar a sua recompensa baseada na configuração do sistema atual. O ensaio leva-nos a um único agrupamento centralizado, validando a nossa observação teórica acima com os esquemas do tipo Bitcoin. De uma perspetiva de descentralização, isto é uma tragédia dos comuns: apesar dos participantes valorizarem a descentralização como um conceito abstrato, nenhum dos agrupamentos individualmente quer suportar esse fardo.
 
 
Figura 1 - Centralização exibida por um esquema de partilha de recompensas to tipo Bitcoin numa simulação com 100 partes interessadas. Inicialmente, uns elevados números de agrupamentos são criados pelas partes interessadas. Revezando-se, as partes interessadas tentam maximizar as suas próprias recompensas e alteram de estratégia, levando a um ponto de convergência onde apenas um agrupamento existe.
 
 
Um melhor esquema de partilha de recompensa
 
Temos que claramente fazer melhor do que uma ditadura! A primeira observação é se atingirmos a descentralização, linearidade entre recompensas e o tamanho deve desvanecer a partir de certo limite. Isto porque, enquanto a linearidade é atrativa quando o agrupamento é pequeno e quer atrair partes interessadas, a partir de certo limite deve ser diminuído se queremos dar uma oportunidade a agrupamentos mais pequenos de serem mais competitivos. Assim, dividimos o comportamento do esquema de partilha de recompensas dependendo do tamanho do agrupamento em duas etapas: uma etapa de crescimento, onde a linearidade tem de ser respeitada e uma etapa de estabilização quando o agrupamento é suficientemente grande. O ponto onde ocorre a transição será designado ponto de saturação e o agrupamento que ultrapasse esse ponto estará saturado. Podemos fixar recompensas a serem constantes após o ponto de saturação de modo que se o ponto de saturação é de 1%, dois agrupamentos, com um total de participação de 1% e 1.5%, receberão a mesma recompensa.
 
Para apreciar a dinâmica da perspetiva de uma única parte interessada, considere o seguinte exemplo. Suponhamos que existem dois agrupamentos A e B geridos pela Alice e pelo Bob, com custos operacionais de 25 e 30 moedas respetivamente, cada um com margem de lucro de 4%. Suponhamos ainda que o total de recompensa a distribui são 1000 moedas e o ponto de saturação do mecanismo de partilha de participação é de 20%. Em qualquer instante temporal, o agrupamento de Alice tem 20% da participação, por isso está no ponto de saturação, enquanto o agrupamento do Bob está a 19%. Um prospetivo membro de um agrupamento, Charlie, detém 1% de participação e pondera qual o agrupamento a juntar. Ao juntar-se ao agrupamento da Alice o agrupamento terá um total de participação de 21% e porque excede o ponto de saturação a recompensa será de 200 moedas (20% do total de recompensas). deduzindo os custos operacionais restam 175 moedas para serem distribuídos pela Alice e os seus membros do agrupamento. Se o Charlie optar pelo agrupamento do Bob, o total de recompensas do agrupamento será de 200 moedas, ou 170 moedas após a dedução dos custos operacionais. Contudo, dado que a participação do Charlie é 5% do agrupamento (1/20), resulta que ele receberá mais 2% de moedas do que se se juntasse ao agrupamento de Alice. Assim, Charlie opta pelo agrupamento do Bob se ele pretender maximizar as suas recompensas.
 
Agora, vejamos o que acontece no caso de Charlie perante a mesma decisão numa etapa inicial hipotética de todo o processo quando o agrupamento de Alice já era de 20% do total de participação, enquanto o agrupamento do Bob era apenas de 3%. Neste caso, Bob tem um agrupamento muito pequeno e o total de recompensas disponíveis para os seus membros é muito menor quando comparado com o caso anterior. Como consequência, se o Charlie fizer os mesmo cálculos para o agrupamento do Bob, a sua participação resultaria num total de 4% da participação total do agrupamento, mas, se fizermos os cálculos, ele receberia uns meros 30% das recompensas que teria obtido caso tivesses juntado ao agrupamento da Alice. Em tais casos, a decisão racional é de se juntar ao agrupamento da Alice apesar do facto desta fidelização ao agrupamento da Alice fazer exceder o ponto de saturação. Refira-se à tabela 1 abaixo para os valores exatos.
 
Pool - Agrupamento
Pool Size - Tamanho do agrupamento
Cost - Custo
Margin - Margem
Charlie's reward - Recompensa de Charlie
 
Tabela 1 - Charlie que detém 1% do total de participação está a ponderar juntar-se a um agrupamento geridos pela Alice, Bob, Brenda e Ben. A sua recompensa é calculada em moedas para se juntar a cada um. O total de recompensa para os agrupamentos é de 1000 moedas e o ponto de saturação é de 20%.
 
Ser previdente interessa
 
O acima aparenta ser contraditório. Para compreender o que o Charlie tem que fazer temos que apreciar o seguinte facto. A escolha de Charlie para se juntar ao agrupamento de Alice num segundo cenário apenas é racional num sentido do muito curto prazo (míope). De facto, Charlie está melhor no agrupamento do Bob, conforme é demonstrado no primeiro cenário, desde que o agrupamento do Bob atinja o ponto de saturação. Assim, se Charlie acreditar que o agrupamento do Bob vai atingir o ponto de saturação, a escolha racional é o de apoiar esse objetivo. Outras partes interessadas farão o mesmo e assim o agrupamento do Bob irá rapidamente atingir o ponto de saturação, tornando toda a gente que participou neste crescimento melhor recompensado, ao mesmo tempo que sustêm o ideal da descentralização: o agrupamento de Alice em vez de crescer constantemente irá parar no ponto de saturação e outros agrupamentos terão a possibilidade de crescerem para o mesmo tamanho. Este tipo de pensamento estratégico por parte das partes interessadas é mais previdente (não míope) e conforme veremos permite a convergência das entidades a um ponto desejado de descentralização do sistema.
 
É de notar que é inevitável que o sistema com a sua evolução chegará a momentos chave onde será crucial para partes interessadas de exercerem um pensamento mais previdente, conforme o cenário atrás onde o agrupamento da Alice atinge o ponto de saturação enquanto os outros agrupamentos ainda são muito pequenos. A razão é devido às circunstâncias particulares de cada gestor de agrupamento, os custos operacionais serão variáveis ao longo de toda a população de partes interessadas. Em resultado disso, é de esperar que começar do zero onde não existem nenhum agrupamento, o agrupamento com o custo operacional mais baixo será o primeiro a crescer. Isto é natural uma vez que os custos operacionais deixam uma maior quantia de recompensas para serem divididos entre os membros do agrupamento. É de esperar que o sistema chegará a momentos, tal como no segundo cenário acima onde o agrupamento mais competitivo (o da Alice com custo operacional de 25) atingiu o ponto de saturação enquanto o segundo mais competitivo (o do Bob com custo operacional de 30) é ainda a um nível mais baixo de fidelização.
 
É tentador considerar o pensamento de longo prazo na configuração de um esquema de partilha de recompensas do tipo Bitcoin e acreditar que também pode ajudar a convergir para a descentralização. Infelizmente, isto não é o caso. Num esquema do tipo Bitcoin, contrário ao esquema de partilha de recompensa com um ponto de saturação, não existe um ponto no desenvolvimento dos agrupamentos de Alice e Bob quando o agrupamento do Bob se torna mais atrativo no ótica do Charlie: isto advém do facto dos custos operacionais da Alice são mais baixos e consequentemente deixa mais recompensas para todas as partes interessadas. Isto deixa o agrupamento do Bob sem quaisquer membros e eventualmente, conforme referido acima, será a decisão racional para o Bob dissolver o seu agrupamento e juntar-se ao agrupamento da Alice, tornando-a a ditadora do sistema.
 
Voltando ao nosso esquema de partilha de recompensas, estabelecemos que o pensamento estratégico não míope promove a descentralização: contudo existe ainda um ponto importante em aberto. No momento chave, quando a parte interessada não míope Charlie decide racionalmente a adesão ao agrupamento saturado da Alice, poderá ter também um número de agrupamentos aspirantes de onde também poderá escolher. Por exemplo, em conjunto com o agrupamento do Bob que tem custos operacionais de 30 moedas e margem de lucro de 4%, pode existir um agrupamento da Brenda com custo operacional de 33 e margem de lucro de 2% e um agrupamento do Ben com custo operacional de 26 e margem de lucro de 1%. A decisão racional seria de ir com aquele que atingirá o ponto de saturação; há alguma forma de determinar qual deles será a melhor opção? No nosso artigo com a análise completa fornecemos um mecanismo explícito que ordena os agrupamentos de acordo com o seu desejo e utilizando a informação gravada no razão sobre cada agrupamento de participação, pode assistir as partes interessadas a tomar as melhores decisões possíveis em qualquer dado momento. No nosso exemplo, é o agrupamento da Brenda que o Charlie deverá escolher se pretender maximizar as suas recompensas (ver tabela 1). Para assistir os utilizadores de Cardano, o mecanismo de ordenamento dos agrupamentos será construído em Daedalus (outras carteiras compatíveis com Cardano) e fornecerá uma representação visual das melhores escolhas disponíveis às partes interessadas utilizando informação do razão no que respeita aos registos dos agrupamentos.
 
 
Avaliação experimental
Como é que o nosso esquema de partilha de recompensas se compara no que se refere à descentralização? No artigo com a análise completa provamos que existe uma classe de configurações do sistema descentralizado que são "equilíbrios de Nash não míopes". Uma estratégia de equilíbrio aqui significa que as partes interessadas têm uma forma específica de criarem agrupamentos, definirem as suas margens de lucro e / ou delegarem a outros agrupamentos para que nenhuma parte interessada, pensando no longo prazo, está melhor seguindo uma estratégia diferente. Mais ainda, demonstramos experimentalmente que o jogo reativo entre partes interessadas com pensamento não míope converge para este equilíbrio num número pequeno de iterações, conforme Figura 2.
 
Figura 2. Descentralização conforme exibido pelo nosso esquema de partilha de recompensas numa simulação com 100 partes interessadas e 10% como o ponto de saturação. Agrupamentos foram gradualmente criados pelas partes interessadas. Revezando-se, as partes interessadas procuram maximizar, de forma não míope, a sua recompensa levando a um ponto de convergência final onde existem 10 agrupamentos, cada um com igual quota do total de participação. No ponto final, nenhuma parte interessada racional deseja alterar o seu estado no sistema.
 
Uma característica da nossa abordagem é que o número de agrupamentos é apenas uma parte da descrição do esquema de partilha de participação e assim não é imposto pelo sistema nas partes interessadas. Isto significa que as partes interessadas são livres de experimentarem com a criação de agrupamentos e delegação de participação sem terem que conformar a nenhuma arquitetura do sistema pré-determinada. Isto contrasta a outras abordagens tomadas em sistemas de PoS tais como EOS onde o número de participantes é um parâmetro programado no sistema de consenso (em concreto 21 agrupamentos). Ao mesmo tempo, a nossa abordagem permite ao conjunto de partes interessadas de expressar a sua livre vontade de se juntarem e saírem de agrupamentos, recebendo garantias de recompensas pela sua participação enquanto testemunham como é que as suas ações têm um impacto quantificável na gestão do razão distribuído PoS independentemente do tamanho da sua participação. Isto contrasta com outras abordagens tomadas em sistemas PoS tais como Ethereum 2.0 onde a manutenção do razão é executada por validadores registados com um depósito de garantia sem um processo programado de veto pelo conjunto de partes interessadas.
 
Assim, o que seria uma escolha sensata para o número de agrupamentos que devem favorecer o esquema de recompensas de Cardano? Dado que a descentralização é o nosso objetivo principal, é sensato definir este parâmetro para ser o mais alto possível. Os nossos ensaios de rede demonstram que o sistema pode operar de forma efetiva com até 1000 agrupamentos. Escolher um limite de saturação para o nosso esquema de partilha de recompensas baseado neste número tornará um agrupamento de participação lucrativo mesmo que o total de participação delegada é tão pouco como 0.1% do total de Ada em circulação.
 
Olhando para a frente - Ataques Sybil
 
Dado que a descentralização pode ser atingida por um elevado número de agrupamentos de participação independentes, é também importante verificar se algumas configurações do sistema são mais preferidas do que outros. Conforme descrito até agora neste post, o nosso esquema de partilha de participação levará partes interessadas racionais para a promoção dos agrupamentos que incorrem no menor custo, isto pode não ser necessariamente o resultado desejado. A razão é que no ponto de equilíbrio pode observar-se que um conjunto de partes interessadas se tornarem gestores de agrupamentos de participação que eles próprios detêm coletivamente uma quantia muito pequena de participação. Este desequilíbrio, no qual uma pequena quantia representa o total de participação do sistema pode ser prejudicial de muitas formas: gestores de agrupamento pode ser corrompidos ou subornados ou pior ainda um detentor de muita participação pode registar-se em muitos agrupamentos na esperança de controlar o ecossistema todo, executando assim um ataque Sybil que pode prejudicar a descentralização. Por este motivo, o esquema de partilha de recompensa é apresentado no nosso artigo com a análise completa é modificado para ser sensível a situações em que participação a suportar um agrupamento de modo que este tipo de comportamento é mitigado. Referiremos em mais detalhes para este aspeto do esquema de partilha de participação de Cardano num próximo post.
 
 
